<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <title>Navigation</title>
    <meta name="description" content="A description of the page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="navigation.css" type="text/css" rel="stylesheet" defer>
</head>
<body>

    <svg hidden>
        <defs>

            <symbol id="monzo-logo" viewBox="0 0 800 298.31">
                <defs>
                    <style>
                        .cls-1{
                            fill:none;
                        }
                        .cls-2{
                            clip-path: url(#clip-path);
                        }
                        .cls-3{
                            fill:#e44d60;
                        }
                        .cls-4{
                            fill:#e4bd7a;
                        }
                        .cls-5{
                            fill:#1c798a;
                        }
                        .cls-6{
                            fill:#77b691;
                        }
                        .cls-7{
                            fill:#fff;
                        }
                    </style>
                    <clipPath id="clip-path">
                        <rect class="cls-1" x="1" y="0.15" width="800" height="298"/>
                    </clipPath>
                </defs>
                <path class="cls-3" d="M233.33,179.84a7.29,7.29,0,0,1-2.14,5.16l-32.63,32.63a2.92,2.92,0,0,1-5-2.06V142.45l39.29-39.08h.46Z"/>
                <path class="cls-4" d="M207.28,77.33a2.91,2.91,0,0,0-4.12,0l-48.52,48.53H154v54.77l.68,1.43,38.94-38.94,39.75-39.75Z"/>
                <path class="cls-5" d="M76,179.84A7.28,7.28,0,0,0,78.08,185l32.63,32.63a2.92,2.92,0,0,0,5-2.06V142.45L76.4,103.37H76Z"/>
                <path class="cls-6" d="M106.11,77.33a2.91,2.91,0,0,0-4.12,0l-26,26,39.74,39.75,38.95,38.94v-56.2Z"/>
                <path class="cls-7" d="M282.17,180.86v-73H301.6v9.78c4.48-7.47,11-11.14,19.83-11.14s15.49,3.8,20.25,11.68c7.61-8,13.45-11.68,22.55-11.68,16.44,0,25.68,9.24,25.68,26.22v48.1H369V141.32c0-10.19-2.18-14.81-10.19-14.81-8.16,0-12.5,5-12.5,14.81v39.54H325.24V141.32c0-10.19-2.18-14.81-10.19-14.81-8.16,0-12.5,5-12.5,14.81v39.54Z"/>
                <path class="cls-7" d="M416.21,117.41a38.52,38.52,0,0,1,65.9,26.49c0,11-3.67,20.11-11,27.45a37.83,37.83,0,0,1-27.72,11.41c-11.14,0-20.1-3.81-27.58-11.69a38.13,38.13,0,0,1-10.73-26.9A37.39,37.39,0,0,1,416.21,117.41Zm27.31,45c9.51,0,17.26-8,17.26-17.94s-7.75-18.07-17.26-18.07-17.25,8-17.25,18.07S434.15,162.38,443.52,162.38Z"/>
                <path class="cls-7" d="M497.27,180.86v-73h20.38l-.27,9.78c4.48-7.34,11.27-11.14,20.92-11.14,15.08,0,24.86,9.51,24.86,26.22v48.1H541.7V141.32c0-10.19-2.18-14.81-10.47-14.81s-12.9,5-12.9,14.81v39.54Z"/>
                <path class="cls-7" d="M656.09,117.41A38.51,38.51,0,0,1,722,143.9c0,11-3.66,20.11-11,27.45a37.83,37.83,0,0,1-27.72,11.41c-11.14,0-20.11-3.81-27.58-11.69A38.13,38.13,0,0,1,645,144.17,37.39,37.39,0,0,1,656.09,117.41Zm27.31,45c9.51,0,17.25-8,17.25-17.94s-7.74-18.07-17.25-18.07-17.26,8-17.26,18.07S674,162.38,683.4,162.38Z"/>
                <path class="cls-7" d="M579.78,180.86V165.64l30-38.86h-30V107.9H634v17.25L607.5,162h27v18.89Z"/>
            </symbol>

            <symbol id="extra-borrowing-icon" width="22" height="18" viewBox="0 0 22 18" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.55.5a1 1 0 0 1 .829 1.56L11.41 2c-.255.441-.41.954-.41 1.5A3 3 0 1 0 16.599 2a1.046 1.046 0 0 1-.129-.5 1 1 0 0 1 .883-.993L17.47.5H20a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2l.001-3.174a1 1 0 0 0-.874-.86l-.117-.006a.996.996 0 0 0-.468.116A2.95 2.95 0 0 1 3.01 12a3 3 0 1 1 1.533-5.58l-.034-.014a1 1 0 0 0 1.492-.732L6 2.5A2 2 0 0 1 7.85.505L8 .5h2.55z" fill-rule="evenodd"/>
            </symbol>

            <symbol id="extra-features-icon" width="20" height="17" viewBox="0 0 20 17" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.75 0a5.25 5.25 0 0 1 4.814 7.349c-.017.049-.038.1-.064.151-1.174 2.349-3.77 5.24-7.79 8.675l-.42.358a2 2 0 0 1-2.58 0C4.453 12.94 1.716 9.93.5 7.5a1.308 1.308 0 0 1-.065-.152A5.25 5.25 0 0 1 10 3.01 5.251 5.251 0 0 1 14.75 0z" fill-rule="evenodd"/>
            </symbol>

            <symbol id="icon-switching-service" width="20" height="18" viewBox="0 0 20 18" xmlns="http://www.w3.org/2000/svg">
                <path d="M15.293 10.293a1 1 0 0 1 1.414 0l3 3A1.006 1.006 0 0 1 20 14v.032l-.004.054L20 14a1.008 1.008 0 0 1-.196.595.999.999 0 0 1-.097.112l.08-.09c-.023.029-.047.057-.073.083l-.007.007-3 3a1 1 0 0 1-1.414-1.414l1.292-1.294-2.694.001a3 3 0 0 1-2.23-.993l-1.816-2.018 1.346-1.495 1.956 2.175a1 1 0 0 0 .744.331l2.694-.001-1.292-1.292a1 1 0 0 1-.083-1.32zM16.613.21l.094.083 3 3c.029.028.055.059.08.09l.005.006c.022.029.043.06.062.09l.021.037c.011.02.022.04.031.06l.023.053A.988.988 0 0 1 20 4l-.002.059-.001.016-.008.074a1.083 1.083 0 0 1-.06.222l-.023.052a1.018 1.018 0 0 1-.102.172l-.025.03c.004-.002.002-.001.001 0l-.013.015-.01.013-.05.054-3 3a1 1 0 0 1-1.497-1.32l.083-.094 1.292-1.294L13.891 5a1 1 0 0 0-.658.246l-.086.085-7.808 8.676a3 3 0 0 1-2.034.987L3.109 15H1a1 1 0 0 1-.117-1.993L1 13h2.11a1 1 0 0 0 .657-.246l.086-.085 7.808-8.676a3 3 0 0 1 2.034-.987L13.891 3l2.694-.001-1.292-1.292a1 1 0 0 1-.083-1.32l.083-.094a1 1 0 0 1 1.32-.083zM3.109 3a3 3 0 0 1 2.23.993L7.155 6.01 5.809 7.505 3.853 5.331A1 1 0 0 0 3.109 5H1a1 1 0 1 1 0-2h2.11zm16.67 1.625l-.072.082.06-.067.012-.015z" fill-rule="evenodd"/>
            </symbol>

            <symbol id="menu-close" width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                <path d="M.293.293a1 1 0 0 1 1.414 0L7 5.585 12.293.293a1 1 0 0 1 1.32-.083l.094.083a1 1 0 0 1 0 1.414L8.415 7l5.292 5.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.414 0L7 8.415l-5.293 5.292a1 1 0 0 1-1.32.083l-.094-.083a1 1 0 0 1 0-1.414L5.585 7 .293 1.707A1 1 0 0 1 .21.387z"></path>
            </symbol>

            <symbol id="menu-open" width="18" height="14" viewBox="0 0 18 14" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.5 11a1.5 1.5 0 0 1 0 3h-15a1.5 1.5 0 0 1 0-3h15zm0-5.5a1.5 1.5 0 0 1 0 3h-15a1.5 1.5 0 0 1 0-3h15zm0-5.5a1.5 1.5 0 0 1 0 3h-15a1.5 1.5 0 0 1 0-3h15z"></path>
            </symbol>

        </defs>
    </svg>

    <div class="overlay" role="presentation"></div>

    <header class="main-navigation">
        <div class="main-navigation__container">

            <div class="main-navigation__header">

                <a href="#" class="main-navigation__logo" aria-label="Return to home">
                    <svg width="800" height="298" class="main-navigation__logo__svg" role="presentation">
                        <use href="#monzo-logo" xlink:href="#monzo-logo"></use>
                    </svg>
                </a>
            </div>
            
            <nav class="main-navigation__wrapper">

                <button id="toggle" class="main-navigation__toggle" aria-label="Open navigation" aria-expanded="false">
                    Menu
                    <svg width="18" height="14" class="main-navigation__toggle__icon" role="presentation">
                        <use href="#menu-open" xlink:href="#menu-open"></use>
                    </svg>
                </button>

                <ul id="menu" class="main-navigation__links" tabindex="-1">

                    <li class="main-navigation__links__item">
                        <button class="main-navigation__links__link-toggle" aria-expanded="false" tabindex="-1">Accounts</button>
                        <ul class="main-navigation__links__dropdown">
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Monzo Current Accounts</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Monzo Plus Accounts</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Monzo Premium Accounts</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Monzo Business Accounts</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Monzo Joint Accounts</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Monzo 16 - 17 Accounts</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item main-navigation__links__dropdown__item--footer">
                                <a href="#" class="main-navigation__links__link main-navigation__links__link--footer">
                                    <!-- <img src="assets/icon-switching-service.svg" alt="" class="main-navigation__links__link__icon"> -->
                                    <svg width="22" height="18" class="main-navigation__links__link__icon" role="presentation">
                                        <use href="#icon-switching-service" xlink:href="#icon-switching-service"></use>
                                    </svg>
                                    Switch to Monzo
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="main-navigation__links__item">
                        <button class="main-navigation__links__link-toggle" aria-expanded="false">Savings</button>
                        <ul class="main-navigation__links__dropdown">
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Saving with Monzo</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Interest Rates</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Cash ISAs</a>
                            </li>
                        </ul>
                    </li>
                    <li class="main-navigation__links__item">
                        <button class="main-navigation__links__link-toggle"aria-expanded="false">Borrowing</button>
                        <ul class="main-navigation__links__dropdown">
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Monzo Flex</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Overdrafts</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Loans</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link main-navigation__links__link--footer">
                                    <!-- <img src="assets/extra-borrowing-icon.svg" alt="" class="main-navigation__links__link__icon"> -->
                                    <svg width="20" height="17" class="main-navigation__links__link__icon" role="presentation">
                                        <use href="#extra-borrowing-icon" xlink:href="#extra-borrowing-icon"></use>
                                    </svg>
                                    What are unsecured loans?
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="main-navigation__links__item main-navigation__links__item--mega-menu">
                        <button class="main-navigation__links__link-toggle" aria-expanded="false">Services</button>
                        <ul class="main-navigation__links__dropdown main-navigation__links__dropdown--mega-menu">
                            <li class="main-navigation__links__dropdown--mega-menu__item">
                                <a href="#" class="main-navigation__links__link">
                                    <img src="https://monzo.com/static/images/flex/flex-hero-1920x1024.jpg" />
                                    Monzo Flex
                                </a>
                            </li>
                            <li class="main-navigation__links__dropdown--mega-menu__item">
                                <a href="#" class="main-navigation__links__link">
                                    <img src="https://monzo.com/static/images/flex/flex-hero-1920x1024.jpg" />
                                    Overdrafts
                                </a>
                            </li>
                            <li class="main-navigation__links__dropdown--mega-menu__item">
                                <a href="#" class="main-navigation__links__link">
                                    <img src="https://monzo.com/static/images/flex/flex-hero-1920x1024.jpg" />
                                    Loans
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="main-navigation__links__item">
                        <button class="main-navigation__links__link-toggle" aria-expanded="false">Features</button>
                        <ul class="main-navigation__links__dropdown">
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Pots</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Travelling with Monzo</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Energy switching</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link">Bill splitting</a>
                            </li>
                            <li class="main-navigation__links__dropdown__item">
                                <a href="#" class="main-navigation__links__link main-navigation__links__link--footer">
                                    <!-- <img src="assets/extra-features-icon.svg" alt="" class="main-navigation__links__link__icon"> -->
                                    <svg width="20" height="18" class="main-navigation__links__link__icon" role="presentation">
                                        <use href="#extra-features-icon" xlink:href="#extra-features-icon"></use>
                                    </svg>
                                    Making Monzo
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="main-navigation__links__item">
                        <a href="#" class="main-navigation__links__link">Help</a>
                    </li>

                </ul>

            </nav>

        </div>
    </header>

    <script>
		const toggle = document.querySelector('#toggle')
		const menu = document.querySelector('#menu')
		const overlay = document.querySelector('.overlay')

		const mobile = (state) => {
			if (state) {
				document.body.classList.add('lock')
                menu.classList.add('main-navigation__links--open');
				overlay.classList.add('overlay--open')
			}
			else {
				document.body.classList.remove('lock')
                menu.classList.remove('main-navigation__links--open')
				overlay.classList.remove('overlay--open')
			}

            menu.querySelectorAll('.main-navigation__links__link-toggle').forEach(toggle => {
                toggle.setAttribute('aria-expanded', state ? true : false)
                toggle.setAttribute('tabindex', state ? '-1' : '')
            })
		}

        const navAriaExpanded = (hover) => {

            // .classList.contains('main-navigation__links__link') || hover

            // Early return if 
            // if (menu.contains(document.activeElement)) return

            // Reset all to false
            menu.querySelectorAll('button.main-navigation__links__link-toggle').forEach(button => button.setAttribute('aria-expanded', false))

            // if (hover) {
            //     if (hover.classList.contains('main-navigation__links__link-toggle')) {
            //         hover.setAttribute('aria-expanded', true)
            //     }
            //     else if (hover.classList.contains('ul.navigation__links__dropdown') || hover.classList.contains('main-navigation__links__link')) {
            //         hover.closest('button.main-navigation__links__link-toggle').setAttribute('aria-expanded', true)
            //     }
            // }

            // if (hover) {
            //     console.log({ hover })
            //     console.log(hover.closest('ul.main-navigation__links__dropdown'))
            //     console.log('-------------------------------')
            // }
            // else {
            //     // console.log(document.activeElement.closest('ul.main-navigation__links__dropdown')) // .parentElement.querySelector('button.main-navigation__links__link-toggle').setAttribute('aria-expanded', true)
            //     console.log('focus')
            // }

            // console.clear()
            // console.log(document.activeElement.closest('ul.main-navigation__links__dropdown').parentElement)

            // Keyboard navigation
            // if (!hover) {
            //     // let ul = document.activeElement.closest('ul.main-navigation__links__dropdown').parentElement
            //     // if (ul.classList.contains('main-navigation__links__item')) ul.querySelector('button.main-navigation__links__link-toggle').setAttribute('aria-expanded', true)
            // }

            // Mouse/pointer navigation
            // else {
            //     // console.log(hover)
            //     // console.log(hover.classList)
            //     // if (hover.classList.contains('main-navigation__links__link-toggle')) {
            //     //     console.log('hovering on a button')
            //     //     hover.setAttribute('aria-expanded', true)
            //     // }
            // }
        }

		// 
		toggle.addEventListener('click', () => {
			menu.classList.contains('main-navigation__links--open') ? mobile(false) : mobile(true)
		})

		// Remove focus of the mobile menu if an element outside of it is focused, passively listener
		document.addEventListener('focusin', () => {
			if (!menu.contains(document.activeElement)) mobile(false)
            navAriaExpanded(false)
		}, true)

        // Navigation hover event
        document.addEventListener('mouseover', e => navAriaExpanded(e.target))

        // Overlay close
		overlay.addEventListener('click', () => overlay.classList.contains('overlay--open') ? mobile(false) : null)
	</script>

</body>
</html>